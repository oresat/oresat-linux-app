{% extends "_base.html" %}

{% block baseContent %}
  <style>
    #headerGrid {
      display: grid;
      grid-template-columns: 25% 50% 25%;
    }
    #headerCenter {
      text-align: center;
    }
    #headerRight {
      text-align: right;
    }
  </style>
  <div id="headerGrid">
    <div id="headerLeft">
       <a href="/">home</a>
    </div>
    <div id="headerCenter">
      <h2>{{name}}</h2>
    </div>
    <div id="headerRight">
      <text><span id="busChannel">vcan0</span>: <span id="busStatus">BUS_DOWN</span> | </text>
      <label for="flightMode">Flight Mode: </label>
      <input type="checkbox" id="flightMode" onclick="toggleFlightMode()"></input>
    </div>
  </div>
  <div id="content">
    {% block content %}{% endblock %}
  </div>
  <script>
    async function updateBusStatus() {
      const status = await getBusStatus();
      document.getElementById("busChannel").textContent = status.channel;
      document.getElementById("busStatus").textContent = status.status;
    }

    updateBusStatus();
    const busInterval = setInterval(function() {
      updateBusStatus();
    }, 1000);
  </script>
{% endblock %}
